window.fbqSpy=window.fbqSpy||function(n){function e(){var e,n=c._fbqOrig=window[u];for(e in r("Hijack",n._fbqOrig?"(already hijacked)":""),window[u]=c,n)n.hasOwnProperty(e)&&(window[u][e]=n[e]===n?c:n[e])}var o,t,a=function(e){if(n=null,e.debugLogPrefix=e.debugLogPrefix||"fbqSpy",e.debug=!!e.debug,!e.callback||"function"!=typeof e.callback){if(e.debug)throw new Error("["+e.debugLogPrefix+"] Aborting; No listener callback provided.");e.callback=function(){}}return e.fbqObjName=e.fbqObjName||"fbq",e}("function"==typeof n?{callback:n}:n),u=a.fbqObjName,i=window[u],r=window.console&&a.debug?function(){var e=[].slice.call(arguments);e.unshift("["+a.debugLogPrefix+"]"),console.log.apply(console,e)}:function(){},l=function(o){var e,n,t={args:o,the:{}},u=t.the;"object"==typeof o[o.length-1]&&o[o.length-1];for(a.debug&&function(e,n){for(e="Intercepted: fbq(",n=0;n<o.length;n++)e+="string"==typeof o[n]?'"'+o[n]+'"':o[n],n+1<o.length&&(e+=", ");r(e+=")")}(),u.command=o[0],"track"!==u.command&&"trackCustom"!==u.command||(u.eventName=o[0]),u.parameters={},e=0;e<o.length;e++)if(o[e]&&"object"==typeof o[e])for(n in o[e])o[e].hasOwnProperty(n)&&(u.parameters[n]=o[e][n]);return r("Run listener callback",u),!1!==a.callback(t)},c=function(){var e=[].slice.call(arguments);if(a.debug){if(!l(e))return r("Command blocked.")}else try{if(!l(e))return}catch(e){}return r("Command allowed:",e),c._fbqOrig.apply(c._fbqOrig,e)},f="callMethod";if(r("Config:",a),i||(r("Instantiating FB command queue"),((i=window[u]=window._fbq=function(){i[f]?i[f].apply(i,arguments):i.queue.push(arguments)}).push=i).loaded=!0,i.version="2.0",i.queue=[]),i[f])r("Loaded after fbevents.js; cannot see previous commands"),e();else if(i.queue){if(r("Command queue instantiated, but library not yet loaded"),i.queue.length){for(r("Applying listener to",i.queue.length," queued commands"),o=[],t=0;t<i.queue.length;t++)l([].slice.call(i.queue[t]))&&o.push(i.queue[t]);i.queue=o}else i.queue=[];e()}else if(a.debug)throw new Error("["+a.debugLogPrefix+"] Aborting; `"+u+"` is not the FB command queue.")};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZicS1zcHkuanMiXSwibmFtZXMiOlsid2luZG93IiwiZmJxU3B5IiwibGlzdGVuZXJDYWxsYmFja19vcl9jb25maWdPYmoiLCJoaWphY2siLCJrIiwiZmJxT3JpZyIsInByb3h5IiwiX2ZicU9yaWciLCJmYnFPYmpOYW1lIiwibG9nIiwiaGFzT3duUHJvcGVydHkiLCJxIiwiaSIsImNvbmZpZyIsImRlYnVnTG9nUHJlZml4IiwiZGVidWciLCJjYWxsYmFjayIsIkVycm9yIiwiZmJxIiwiY29uc29sZSIsImEiLCJzbGljZSIsImNhbGwiLCJhcmd1bWVudHMiLCJ1bnNoaWZ0IiwiYXBwbHkiLCJwcm9jZXNzQXJncyIsImV2IiwiYXJncyIsInRoZSIsImxlbmd0aCIsImwiLCJjb21tYW5kIiwiZXZlbnROYW1lIiwicGFyYW1ldGVycyIsImV4IiwiaGludEZicU1ldGhvZCIsIl9mYnEiLCJxdWV1ZSIsInB1c2giLCJsb2FkZWQiLCJ2ZXJzaW9uIl0sIm1hcHBpbmdzIjoiQUFtQ0NBLE9BQU9DLE9BQVNELE9BQU9DLFFBQVUsU0FBaUJDLEdBeUZ4QyxTQUFUQyxJQUdFLElBQUlDLEVBQUdDLEVBQVVDLEVBQU1DLFNBQVdQLE9BQU9RLEdBS3pDLElBQUtKLEtBSkxLLEVBQUssU0FBVUosRUFBUUUsU0FBVyxxQkFBdUIsSUFFekRQLE9BQU9RLEdBQWNGLEVBRVhELEVBQ0pBLEVBQVFLLGVBQWdCTixLQUMxQkosT0FBT1EsR0FBWUosR0FBS0MsRUFBUUQsS0FBT0MsRUFBVUMsRUFBUUQsRUFBUUQsSUFoR3ZFLElBdUdBTyxFQUFHQyxFQXZHQ0MsRUFBUyxTQUFXQSxHQUl0QixHQUhBWCxFQUFnQyxLQUNoQ1csRUFBT0MsZUFBaUJELEVBQU9DLGdCQUFrQixTQUNqREQsRUFBT0UsUUFBVUYsRUFBT0UsT0FDbkJGLEVBQU9HLFVBQVksbUJBQXNCSCxFQUFPRyxTQUFVLENBQzdELEdBQUlILEVBQU9FLE1BQ1QsTUFBTSxJQUFJRSxNQUFPLElBQU1KLEVBQU9DLGVBQWlC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IjoiZmJxLXNweS5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIExpc3RlbnMgZm9yIGRhdGEgcGFzc2VkIHRvIEZhY2Vib29rJ3MgZmJldmVudHMuanMnIGBmYnEoKWAgQVBJIChcInBpeGVsc1wiKS5cbiAqIEFsbG93cyBvbmUgdG8gcGlnZ3liYWNrIG9uLCBtb2RpZnksIGFuZC9vciBibG9jayBGYWNlYm9vayB3ZWIgcGl4ZWxzIHdpdGhvdXQgXG4gKiAgIG1vZGlmeWluZyB0aGUgc291cmNlIHRyYWNraW5nIGRpcmVjdGx5LiBcbiAqICAgXG4gKiAgRXhhbXBsZSB1c2UgY2FzZXM6XG4gKiAgIC0gVXNlIFRNUyB0byBtYWtlIGludGVyaW0gZW5oYW5jZW1lbnRzIHRvIGhhcmRjb2RlZC90aGlyZC1wYXJ0eSB0cmFja2luZy5cbiAqICAgLSBVcGdyYWRlIGFsbCBGQiB3ZWIgcGl4ZWxzIGF0IG9uY2UgdG8gc3VwcG9ydCBDQVBJXG4gKlxuICogQGF1dGhvciBTdGVwaGVuIE0gSGFycmlzIDxzbWhtaWNAZ21haWwuY29tPlxuICogQHZlcnNpb24gMS4wXG4gKi9cblxuLyoqXG4gKiBAY2FsbGJhY2sgZmJxU3B5Q2IgXG4gKiBGdW5jdGlvbiB0byBjYWxsIHdoZW5ldmVyIGBmYnEoKWAgaXMgY2FsbGVkLlxuICogQHBhcmFtIHtPYmplY3R9IGRhdGEgIC0gUHJvdmlkZXMgb3JpZ2luYWwgYW5kIHBhcnNlZCBjb21tYW5kIGFyZ3VtZW50cy5cbiAqICAgQHBhcmFtIHtBcnJheX0gIGRhdGEuYXJncyAtIEFyZ3VtZW50cyBwYXNzZWQgdG8gYGZicSgpYC5cbiAqICAgQHBhcmFtIHtPYmplY3R9IGRhdGEudGhlICAtIE9iamVjdCBsaXN0aW5nIGFsbCBwYXNzZWQgZmllbGRzIGJ5IG5hbWUuXG4gKiAgICAgQHBhcmFtICAge3N0cmluZ30gICAgICAgICAgIGRhdGEudGhlLmNvbW1hbmQgICAgLSB0aGUgZmlyc3QgYXJndW1lbnQgKGluaXQsIHRyYWNrLCBldGMpXG4gKiAgICAgQHBhcmFtICAge3N0cmluZ3x1bmRlZmluZWR9IGRhdGEudGhlLmV2ZW50TmFtZSAgLSBvbmx5IGZvciB0cmFjayBhbmQgdHJhY2tDdXN0b20gY29tbWFuZHNcbiAqICAgICBAcGFyYW0gICB7T2JqZWN0fSAgICAgICAgICAgZGF0YS50aGUucGFyYW1ldGVycyAtIG1lcmdlIG9mIGFsbCBwYXNzZWQgb2JqZWN0c1xuICogICAgIEBwYXJhbSAgIHtzdHJpbmd8dW5kZWZpbmVkfSBkYXRhLnRoZS5wYXJhbWV0ZXJzLiogXG4gKiBAcmV0dXJuIHtib29sZWFufCp9IC0gUmV0dXJuIGZhbHNlIHRvIHByZXZlbnQgY29tbWFuZCBmcm9tIGJlaW5nIHBhc3NlZCB0byBmYmV2ZW50cy5qcy5cbiAqL1xuXG4vKiogXG4gKiBAZnVuY3Rpb24gZmJxU3B5IC0gTGlzdGVuZXIgZm9yIGNvbW1hbmRzIHBhc3NlZCB0byBmYmV2ZW50cy5qcy5cbiAqIEBwYXJhbSB7T2JqZWN0fGZ1bmN0aW9ufSBsaXN0ZW5lckNhbGxiYWNrX29yX2NvbmZpZ09iaiAtIElmIGZ1bmN0aW9uLCB3aWxsIGJlIHRyZWF0ZWQgYXMgYGNhbGxiYWNrYCBvZiBcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3RlbmVyIGNvbmZpZywgb3RoZXJ3aXNlIGxpc3RlbmVyIGNvbmZpZyBvYmplY3QuXG4gKiAgICAgQHByb3BlcnR5IHtmYnFTcHlDYn0gIGNhbGxiYWNrICAtIEZ1bmN0aW9uIHRvIGNhbGwgd2hlbmV2ZXIgYGZicSgpYCBpcyBjYWxsZWQuXG4gKiAgICAgQHByb3BlcnR5IHtzdHJpbmd9ICAgZmJxT2JqTmFtZSAtIFRoZSBuYW1lIG9mIHRoZSBnbG9iYWwgZmJxIG9iamVjdC4gRGVmYXVsdDogXCJmYnFcIi5cbiAqIFx0ICAgQHByb3BlcnR5IHtib29sZWFufSAgZGVidWcgICAgIC0gU2V0IHRydWUgdG8gYWN0aXZhdGUgbG9nZ2luZyBhbmQgYXZvaWQgdHJ5L2NhdGNoIHByb3RlY3Rpb24uIERlZmF1bHQ6IGZhbHNlLlxuICogICAgIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gIGRlYnVnTG9nUHJlZml4IC0gU3RyaW5nIHdpdGggd2hpY2ggdG8gcHJlZml4IGxvZyBtZXNzYWdlcy4gRGVmYXVsdDogXCJmYnFTcHlcIi5cbiAqL1xuO3dpbmRvdy5mYnFTcHkgPSB3aW5kb3cuZmJxU3B5IHx8IGZ1bmN0aW9uIGZicVNweSggbGlzdGVuZXJDYWxsYmFja19vcl9jb25maWdPYmogKXtcbiAgXG4gIC8qKiBMaXN0ZW5lciBjb25maWd1cmF0aW9uLiAqKi9cbiAgdmFyIGNvbmZpZyA9IChmdW5jdGlvbiggY29uZmlnICl7XG4gICAgbGlzdGVuZXJDYWxsYmFja19vcl9jb25maWdPYmogPSBudWxsO1xuICAgIGNvbmZpZy5kZWJ1Z0xvZ1ByZWZpeCA9IGNvbmZpZy5kZWJ1Z0xvZ1ByZWZpeCB8fCAnZmJxU3B5JztcbiAgICBjb25maWcuZGVidWcgPSAhIWNvbmZpZy5kZWJ1ZztcbiAgICBpZiggIWNvbmZpZy5jYWxsYmFjayB8fCAnZnVuY3Rpb24nICE9PSB0eXBlb2YgY29uZmlnLmNhbGxiYWNrICl7XG4gICAgICBpZiggY29uZmlnLmRlYnVnIClcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCAnWycgKyBjb25maWcuZGVidWdMb2dQcmVmaXggKyAnXSBBYm9ydGluZzsgTm8gbGlzdGVuZXIgY2FsbGJhY2sgcHJvdmlkZWQuJyApO1xuICAgICAgY29uZmlnLmNhbGxiYWNrID0gZnVuY3Rpb24oKXt9O1xuICAgIH1cbiAgICBjb25maWcuZmJxT2JqTmFtZSA9IGNvbmZpZy5mYnFPYmpOYW1lIHx8ICdmYnEnO1xuICAgIHJldHVybiBjb25maWc7XG4gIH0pKCdmdW5jdGlvbicgPT09IHR5cGVvZiBsaXN0ZW5lckNhbGxiYWNrX29yX2NvbmZpZ09ialxuICAgID8geyAnY2FsbGJhY2snIDogbGlzdGVuZXJDYWxsYmFja19vcl9jb25maWdPYmogfVxuICAgIDogbGlzdGVuZXJDYWxsYmFja19vcl9jb25maWdPYmogKSxcbiAgIFxuICAvKiogVGhlIG5hbWUgb2YgdGhlIGdsb2JhbCBmYnEgb2JqZWN0LiAqL1xuICBmYnFPYmpOYW1lID0gY29uZmlnLmZicU9iak5hbWUsXG4gIFxuICAvKiogVGhlIGdsb2JhbCBmYnEgb2JqZWN0LiAqL1xuICBmYnEgPSB3aW5kb3dbZmJxT2JqTmFtZV0sXG5cbiAgLyoqIExvZyB0byBgY29uc29sZWAgKGlmIHN1cHBvcnRlZCBieSBicm93c2VyKS4gKi9cbiAgbG9nID0gd2luZG93LmNvbnNvbGUgJiYgY29uZmlnLmRlYnVnXG4gICAgPyBmdW5jdGlvbigpe3ZhciBhPVtdLnNsaWNlLmNhbGwoYXJndW1lbnRzKTthLnVuc2hpZnQoJ1snK2NvbmZpZy5kZWJ1Z0xvZ1ByZWZpeCsnXScpO2NvbnNvbGUubG9nLmFwcGx5KGNvbnNvbGUsYSl9IFxuICAgIDogZnVuY3Rpb24oKXt9LFxuXG4gIC8qKlxuICAgKiBAZnVuY3Rpb24gcHJvY2Vzc0FyZ3NcbiAgICogUHJvY2Vzc2VzIGVhY2ggc2V0IG9mIGFyZ3VtZW50cyBwYXNzZWQgdG8gYGZicSgpYC5cbiAgICogQHBhcmFtICAge0FycmF5fSBhIC0gQXJyYXkgb2YgYXJndW1lbnRzIHBhc3NlZCB0byBgZmJxKClgLlxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gLSBSZXR1cm5zIGZhbHNlIHRvIGluZGljYXRlIHRoaXMgY29tbWFuZCBzaG91bGQgYmUgYmxvY2tlZC5cbiAgICovXG4gIHByb2Nlc3NBcmdzID0gZnVuY3Rpb24oIGEgKXtcbiAgICB2YXIgX2NvbW1hbmRQYXJ0cywgaSwgaywgZXYgPSB7IGFyZ3M6YSwgdGhlOnt9IH0sIHRoZSA9IGV2LnRoZSwgXG4gICAgICAgIGFyZ0ZpZWxkcyA9ICdvYmplY3QnID09PSB0eXBlb2YgYVthLmxlbmd0aC0xXSA/IGFbYS5sZW5ndGgtMV0gOiB7fTtcbiAgICBjb25maWcuZGVidWcgJiYgKGZ1bmN0aW9uKGwsaSl7XG4gICAgICBmb3IoIGw9J0ludGVyY2VwdGVkOiBmYnEoJyxpPTA7IGk8YS5sZW5ndGg7IGkrKyApe1xuICAgICAgICBsICs9ICdzdHJpbmcnID09PSB0eXBlb2YgYVtpXSA/ICdcIicrYVtpXSsnXCInIDogYVtpXTtcbiAgICAgICAgaWYoIGkrMTxhLmxlbmd0aCApIGwgKz0gJywgJztcbiAgICAgIH1cbiAgICAgIGwgKz0gJyknO1xuICAgICAgbG9nKGwpO1xuICAgIH0pKCk7XG4gICAgXG4gICAgLy8gTm8ga25vd24gZG9jdW1lbnRhdGlvbiwgYnV0IFxuICAgIC8vIGluaXQgYWRkUGl4ZWxJZCBzZXQgdHJhY2sgdHJhY2tDdXN0b20gc2VuZCBvbiBsb2FkUGx1Z2luIGVuZHBvaW50IHJlbGVhc2VTZWdtZW50IHByb3h5IGF1dG9Db25maWcgZXhwZXJpbWVudHNcbiAgICB0aGUuY29tbWFuZCA9IGFbMF07XG4gICAgXG4gICAgaWYoICd0cmFjayc9PT0gdGhlLmNvbW1hbmQgfHwgJ3RyYWNrQ3VzdG9tJz09PSB0aGUuY29tbWFuZCApXG4gICAgICB0aGUuZXZlbnROYW1lID0gYVswXTtcbiAgICBcbiAgICB0aGUucGFyYW1ldGVycyA9IHt9O1xuICAgIGZvciggaT0wOyBpPGEubGVuZ3RoOyBpKysgKVxuICAgICAgaWYoIGFbaV0gJiYgdHlwZW9mIGFbaV0gPT09ICdvYmplY3QnIClcbiAgICAgICAgZm9yKCBrIGluIGFbaV0gKVxuICAgICAgICAgIGlmKCBhW2ldLmhhc093blByb3BlcnR5KGspIClcbiAgICAgICAgICAgIHRoZS5wYXJhbWV0ZXJzW2tdID0gYVtpXVtrXTtcbiAgICAgIFxuICAgIFxuICAgIGxvZyggJ1J1biBsaXN0ZW5lciBjYWxsYmFjaycsIHRoZSApO1xuICAgIGlmKCBmYWxzZSA9PT0gY29uZmlnLmNhbGxiYWNrKCBldiApIClcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICBlbHNlIHJldHVybiB0cnVlO1xuICB9LFxuICAgICAgXG4gIC8qKlxuICAgKiBAZnVuY3Rpb24gcHJveHlcbiAgICogVGhlIGZ1bmN0aW9uIHRoYXQgd2lsbCByZXBsYWNlIGBmYnEoKWAuICBQYXNzZXMgYXJndW1lbnRzIHRvIHByb2Nlc3NBcmdzOyBpZlxuICAgKiAgIHByb2Nlc3NBcmdzIHJldHVybnMgZmFsc2UgYWxzbyBwYXNzZXMgYXJndW1lbnRzIHRvIGBmYnEoKWAuXG4gICAqIEBtZW1iZXIgIHtPYmplY3R9IGZicU9yaWcgLSBUaGUgb3JpZ2luYWwgYGZicSgpYCBvYmplY3QuXG4gICAqL1xuICBwcm94eSA9IGZ1bmN0aW9uKCl7XG4gICAgdmFyIGEgPSBbXS5zbGljZS5jYWxsKCBhcmd1bWVudHMgKTtcbiAgICBpZiggY29uZmlnLmRlYnVnICl7IFxuICAgICAgaWYoICEgcHJvY2Vzc0FyZ3MoIGEgKSApIHJldHVybiBsb2coICdDb21tYW5kIGJsb2NrZWQuJyApOyBcbiAgICB9ZWxzZXsgdHJ5eyBcbiAgICAgIGlmKCAhIHByb2Nlc3NBcmdzKCBhICkgKSByZXR1cm47IFxuICAgIH1jYXRjaChleCl7fX1cbiAgICBsb2coICdDb21tYW5kIGFsbG93ZWQ6JywgYSApO1xuICAgIHJldHVybiBwcm94eS5fZmJxT3JpZy5hcHBseSggcHJveHkuX2ZicU9yaWcsIGEgKTtcbiAgfSxcbiAgICAgIFxuICAvKiogXG4gICAqIEBmdW5jdGlvbiBoaWphY2tcbiAgICogUmVwbGFjZXMgZ2xvYmFsIEZCIGNvbW1hbmQgcXVldWUgd2l0aCBhIHByb3h5LiBBc3N1bWVzIGdsb2JhbCBvYmplY3QgZXhpc3RzLlxuICAgKi9cbiAgaGlqYWNrID0gZnVuY3Rpb24oKXtcbiAgICAvLyBUaGUgY3VycmVudCBnbG9iYWwgRkIgcXVldWUuIENvdWxkIGJlIHRoZSBjb21tYW5kIHF1ZXVlIG9yIHRoZSBsb2FkZWQgRkIgcXVldWUuXG4gICAgLy8gVE9ETzogc2hvdWxkIHdlIGFsd2F5cyBwcmVzZXJ2ZSBmYnFPcmlnIHRvIGJlIGFjdHVhbCBvcmlnLCBub3QganVzdCBwcmV2aW91cz8gKGkuZS4gaWYgZmJxU3B5IHdhcyBsb2FkZWQgdHdpY2UpXG4gICAgdmFyIGssIGZicU9yaWcgPSBwcm94eS5fZmJxT3JpZyA9IHdpbmRvd1tmYnFPYmpOYW1lXTtcbiAgICBsb2coICdIaWphY2snLCBmYnFPcmlnLl9mYnFPcmlnID8gJyhhbHJlYWR5IGhpamFja2VkKScgOiAnJyApO1xuICAgIC8vIFJlcGxhY2UgRkIgcXVldWUgd2l0aCBhIHByb3h5LlxuICAgIHdpbmRvd1tmYnFPYmpOYW1lXSA9IHByb3h5O1xuICAgIC8vIE1haW50YWluIHJlZmVyZW5jZXMgdG8gRkIncyBwdWJsaWMgaW50ZXJmYWNlLiBcbiAgICBmb3IoIGsgaW4gZmJxT3JpZyApXG4gICAgICBpZiggZmJxT3JpZy5oYXNPd25Qcm9wZXJ0eSggayApIClcbiAgICAgICAgd2luZG93W2ZicU9iak5hbWVdW2tdID0gZmJxT3JpZ1trXSA9PT0gZmJxT3JpZyA/IHByb3h5IDogZmJxT3JpZ1trXTtcbiAgfSxcbiAgICAgIFxuICAvKiogUHJlc2VuY2Ugb2YgdGhpcyBtZXRob2Qgb24gYGZicWAgaW5kaWNhdGVzIHRoZSBsaWJyYXJ5IGlzIGxvYWRlZCAodGhlIHNhbWUgXG4gICAgKiBjaGVjayB1c2VkIGluIEZhY2Vib29rJ3Mgc3RhbmRhcmQgcGl4ZWwgZW1iZWQgY29kZSkuICovXG4gIGhpbnRGYnFNZXRob2QgPSAnY2FsbE1ldGhvZCcsXG4gICAgICBcbiAgcSwgaTtcbiAgICBcbiAgbG9nKCAnQ29uZmlnOicsIGNvbmZpZyApO1xuICAgIFxuICBpZiggIWZicSApeyAvLyBJbnN0YW50aWF0ZSBGQiBjb21tYW5kIHF1ZXVlIGEgbGEgVUEgc25pcHBldC5cbiAgICBsb2coICdJbnN0YW50aWF0aW5nIEZCIGNvbW1hbmQgcXVldWUnICk7XG4gICAgZmJxID0gd2luZG93W2ZicU9iak5hbWVdID0gd2luZG93Ll9mYnEgPSBmdW5jdGlvbigpeyBcbiAgICAgIGZicVtoaW50RmJxTWV0aG9kXSA/IGZicVtoaW50RmJxTWV0aG9kXS5hcHBseSggZmJxLCBhcmd1bWVudHMgKSA6IGZicS5xdWV1ZS5wdXNoKCBhcmd1bWVudHMgKVxuICAgIH07XG4gICAgZmJxLnB1c2ggPSBmYnE7XG4gICAgZmJxLmxvYWRlZCA9ICEwO1xuICAgIGZicS52ZXJzaW9uID0gJzIuMCc7XG4gICAgZmJxLnF1ZXVlID0gW107XG4gIH1cblxuICBpZiggZmJxW2hpbnRGYnFNZXRob2RdICl7XG4gICAgbG9nKCAnTG9hZGVkIGFmdGVyIGZiZXZlbnRzLmpzOyBjYW5ub3Qgc2VlIHByZXZpb3VzIGNvbW1hbmRzJyApO1xuICAgIGhpamFjaygpO1xuICB9IGVsc2UgaWYoIGZicS5xdWV1ZSApe1xuICAgIGxvZyggJ0NvbW1hbmQgcXVldWUgaW5zdGFudGlhdGVkLCBidXQgbGlicmFyeSBub3QgeWV0IGxvYWRlZCcgKTtcbiAgICBpZiggZmJxLnF1ZXVlLmxlbmd0aCApe1xuICAgICAgbG9nKCAnQXBwbHlpbmcgbGlzdGVuZXIgdG8nLGZicS5xdWV1ZS5sZW5ndGgsJyBxdWV1ZWQgY29tbWFuZHMnICk7XG4gICAgICBmb3IoIHEgPSBbXSwgaSA9IDA7IGkgPCBmYnEucXVldWUubGVuZ3RoOyBpKysgKVxuICAgICAgICBpZiggcHJvY2Vzc0FyZ3MoIFtdLnNsaWNlLmNhbGwoIGZicS5xdWV1ZVtpXSApICkgKVxuICAgICAgICAgIHEucHVzaCggZmJxLnF1ZXVlW2ldICk7XG4gICAgICBmYnEucXVldWUgPSBxO1xuICAgIH0gZWxzZSB7IGZicS5xdWV1ZSA9IFtdOyB9XG4gICAgXG4gICAgLy8gSWYgZmJldmVudHMuanMgdXBkYXRlcyB0byByZXBsYWNlIHRoZWBmYnFgIG9iamVjdCwgd2UnZCBwdXQgYSB0aGUgdHJhcCB0byByZS1oaWphY2sgaGVyZS5cbiAgICAvL2ZicV9sb2FkZWRfY2FsbGJhY2soIGhpamFjayApOyBcbiAgICBcbiAgICBoaWphY2soKTsgLy8gSGlqYWNrIHRoZSBjb21tYW5kIHF1ZXVlLlxuICAgIFxuICB9IGVsc2UgaWYoIGNvbmZpZy5kZWJ1ZyApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoICdbJytjb25maWcuZGVidWdMb2dQcmVmaXgrJ10gQWJvcnRpbmc7IGAnK2ZicU9iak5hbWUrJ2AgaXMgbm90IHRoZSBGQiBjb21tYW5kIHF1ZXVlLicgKTtcbiAgfVxuXG59O1xuXG5cblxuIl19
